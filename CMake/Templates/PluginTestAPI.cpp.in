#include <iostream>
#include "gmock/gmock.h"
#include "gtest/gtest.h"
#include "tfp/plugin/Plugin.hpp"

extern "C" {

int run_tests(int argc, char** argv)
{
    std::cout << "Running tests from run_tests() in plugin " "@TARGET@" "\n";
    // Since Google Mock depends on Google Test, InitGoogleMock() is
    // also responsible for initializing Google Test.  Therefore there's
    // no need for calling testing::InitGoogleTest() separately.
    testing::InitGoogleMock(&argc, argv);
    int result = RUN_ALL_TESTS();
    CLEAR_ALL_TESTS();
    return result;
}

}
